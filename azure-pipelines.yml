# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- cicd/ni-build-pipeline

variables:
  buildConfiguration: 'Release'

stages:
- stage: 'Build'
  displayName: 'Build the UI Kit files'
  jobs: 
  - job: 'Build'
    displayName: 'Build job'

  pool:
    vmImage: 'Ubuntu-16.04'
    demands:
      - npm

  steps:
  - task: Npm@1
    displayName: 'Run npm build'
    inputs:
      verbose: false

  - script: |
      npm build

    displayName: 'npm build'


  - stage: 'Deploy'
  displayName: 'Deploy the UI Kit dist folder'
  dependsOn: Build
  jobs:
  - deployment: Deploy
    pool:
      vmImage: 'Ubuntu-16.04'
    environment: dev
    variables:
    - group: Release
    strategy:
      runOnce:
        deploy:
          steps:
